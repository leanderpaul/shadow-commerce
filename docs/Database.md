# **D A T A B A S E &nbsp;&nbsp;&nbsp; S T R U C T U R E**

`Database name = shadow-commerce`

## User Collection

`Contains the records of all the users in the application`

- collection name: users
- indexes
  - email (unique index)
  - phoneNumber (unique index)

```js
const users = {
	_id: {
		type: ObjectId,
		required: true,
		description: 'MongoDB ID generated by the database itself by default',
		example: ObjectId('')
	},
	phoneNumber: {
		type: Number,
		required: false,
		unique: true,
		validator: '10 digits',
		description: 'phone number of the user',
		example: '9876543216'
	},
	email: {
		type: String,
		required: true,
		unique: true,
		validator: 'email address',
		description: 'email address of the user',
		example: 'test-user@test.com'
	},
	password: {
		type: String,
		required: true,
		description: 'contains the hashed password of the user',
		example: ''
	},
	firstName: {
		type: String,
		required: false,
		validator: 'alphabets',
		description: 'first name of the user',
		example: 'tester'
	},
	lastName: {
		type: String,
		required: false,
		validator: 'alphabets',
		description: 'last name of the user',
		example: 'one'
	},
	cart: {
		type: [cartItem],
		required: true,
		description: 'contains the list of items the user has added into the cart.',
		example: [{ item: '', quantity: 2 }]
	}
};
```

```js
const cartItem = {
	item: {
		type: String,
		required: true,
		description: 'Foreign key of products.guid',
		example: ''
	},
	quantity: {
		type: Number,
		required: true,
		description: 'the quantity of the item',
		example: 2
	}
};
```

---

## Product collection

`contains all the products that are present in the application`

- collection name: products
- indexes
  - pid (unique index)
  - category, brand, productName (compound index)

```js
const products = {
	_id: {
		type: ObjectId,
		required: true,
		description: 'MongoDB ID generated by the database itself by default',
		example: ObjectId('')
	},
	pid: {
		type: Number,
		required: true,
		unique: true,
		description: 'contains the id of the product',
		example: ''
	},
	productName: {
		type: String,
		required: true,
		validator: 'alphanumbericals',
		description: 'name of the product',
		example: 'blue water bottle'
	},
	brand: {
		type: String,
		required: true,
		description: 'the company or brand to which the product belongs to',
		example: 'adidas'
	},
	category: {
		type: String,
		required: true,
		enum: ['Mobiles', 'Laptops', 'Desktops', 'Accessories', 'Games'],
		description: 'the category of the product'
	},
	description: {
		type: 'HTML',
		required: true,
		description: 'contains a html description of the product'
	},
	stock: {
		type: Number,
		required: true,
		description: 'the amount of product available',
		example: 20
	},
	price: {
		type: Number,
		required: true,
		description: 'price of the product',
		example: '34.99'
	}
};
```

---

## Transaction collection

`This collection keeps a record of all the transactions that are made in the application`

- collection name: transactions
- indexes
  - tid (unique)
  - ofUser, date (compound)

```js
const transactions = {
	_id: {
		type: ObjectId,
		required: true,
		description: 'MongoDB ID generated by the database itself by default',
		example: ObjectId('')
	},
	tid: {
		type: Number,
		required: true,
		unique: true,
		description: 'contains the id of the transaction',
		example: ''
	},
	ofUser: {
		type: ObjectId,
		required: true,
		description: 'Foreign key of users._id',
		example: ObjectId('')
	},
	date: {
		type: Date,
		required: true,
		description: 'Time of the transaction',
		example: ''
	},
	items: {
		type: [item],
		required: true,
		description: 'Array of all the products the user ordered',
		example: [{ itemId: '', quantity: 2 }]
	},
	total: {
		type: Number,
		required: true,
		description: 'The total price to pay',
		example: 1000
	},
	isPaid: {
		type: Boolean,
		required: true,
		description: 'To denote whether the user has paid or not',
		example: true
	},
	isDelivered: {
		type: Boolean,
		required: true,
		description: 'To denote whether the product has been delivered or not',
		example: true
	}
};
```

```js
const item = {
	itemId: {
		type: Number,
		required: true,
		description: 'Foreign key of products.pid',
		example: ''
	},
	quantity: {
		type: Number,
		required: true,
		description: 'Quantity of the item',
		example: 4
	}
};
```
